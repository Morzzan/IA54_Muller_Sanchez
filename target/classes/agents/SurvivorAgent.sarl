/** 
 * 
 */
package agents

import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.core.Lifecycle
import io.sarl.core.Logging
import model.EndEvent
import model.HelpMe
import model.RegisterEvent
import model.SurvivorPerceptEvent

/** 
 * @author morzzan
 * 
 */
agent SurvivorAgent {
	uses Logging, DefaultContextInteractions, Lifecycle
	var nb : int

	on Initialize {
		nb = occurrence.parameters.get(0) as Integer
		loggingName = "Survivor "+nb
		emit(new RegisterEvent(nb,typeof(SurvivorAgent)))
		info("Survivor in Danger")
	}
	on SurvivorPerceptEvent{
		emit(new HelpMe(occurrence.survivor))[occurrence.around.contains(it.UUID)]
		killMe
	}

	on EndEvent {
		killMe
	} 
}
